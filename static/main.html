<html>
  <head>
	<title>Easy Connect</title>
	<link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="../static/bootstrap/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="../static/style.css">
	<script src="../static/jquery-1.11.1.min.js"></script>
	<script src="../static/bootstrap/js/bootstrap.min.js"></script>
	<script src="../static/jquery-ui/jquery-ui.min.js"></script>
	<script src="../static/jquery-ui.js"></script>
	<script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
	<script src="http://gregpike.net/demos/bootstrap-file-input/bootstrap.file-input.js.pagespeed.jm.IdmWcpRIii.js"></script>
	<script>$(document).ready(function(){$('input[type=file]').bootstrapFileInput();});</script>
	<script>	

	$(function(){

		var ctx = document.getElementById("background").getContext("2d");

		$('body').on('click', '#stage .cell', function(e){

			//check if there is a clicked one
			if($('a.clicked').length == 0){
				$(this).addClass('clicked');
			}
			else {
				var last_clicked = $($('.cell.clicked').get(0));

				var end_x = $(this).position().left + ($(this).outerWidth(true)/2);
				var end_y = $(this).position().top + ($(this).outerHeight(true)/2);
				var start_x = last_clicked.position().left + (last_clicked.outerWidth(true)/2);
				var start_y = last_clicked.position().top + (last_clicked.outerHeight(true)/2); 


					if(start_x > end_x){ 
						start_x  = start_x -$('a').width()/2; 
						end_x  = end_x + $('a').width()/2; 
					}
					if(start_x < end_x){ 
						start_x  = start_x + $('a').width()/2; 
						end_x  = end_x - $('a').width()/2; 
					}

				// column1 can not connect to column3, column1 can not connect to itself
				if( Math.abs(start_x - end_x) < $('a').width() && start_x != end_x){
					//Draw each line in the draw buffer            
					ctx.beginPath();
					ctx.strokeStyle = '#000';
					ctx.moveTo(start_x, start_y);
					ctx.lineTo(end_x, end_y);
					ctx.stroke();
				}
				last_clicked.removeClass('clicked');	
			}
		});
	});


	</script>
  </head>
  <body>

    <div class="col-xs-6 col-sm-3" style="height:100%; background-color:#2b5b84; padding-top:30px; padding-left:50px"></div>

    <div class="col-sm-9" style="height:100%">

		<div class="container">
			<h1> Easy Connect </h1>
			<fieldset>
				<legend>Connection Edit</legend>
			</fieldset>
			<div id="game_area">
				<div id="stage">
					
					<a href="javascript:;" id='in_device' class="button cell"></a>
					<a href="javascript:;" id='map_func' class="button cell"></a>
					<a href="javascript:;" id='out_device' class="button cell"></a>

					<a href="javascript:;" id='in_device' class="button cell"></a>
					<a href="javascript:;" id='map_func' class="button cell"></a>
					<a href="javascript:;" id='out_device' class="button cell"></a>

					<a href="javascript:;" id='in_device' class="button cell"></a>
					<a href="javascript:;" id='map_func' class="button cell"></a>
					<a href="javascript:;" id='out_device' class="button cell"></a>


					<a href="javascript:;" id='in_device' class="button cell"></a>
					<a href="javascript:;" id='map_func' class="button cell" style="visibility: hidden;"></a>
					<a href="javascript:;" id='out_device' class="button cell"></a>

					<div class="clear"></div>
					<canvas width="1077px" height="500px" id="background"></canvas>
				</div>

			</div>
		</div>
	</div>
  </body>
</html>
